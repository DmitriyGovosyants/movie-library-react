"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[913],{8156:function(e,n,t){t.d(n,{a:function(){return a}});var r=t(885),u=t(2791),a=function(e){var n=(0,u.useState)((function(){var n=e.get("filtering");if(!n)return null;var t=n.split("-");return{value:Number(t[0]),label:t[1]}})),t=(0,r.Z)(n,2);return[t[0],t[1]]}},9839:function(e,n,t){t.r(n),t.d(n,{Library:function(){return w}});var r=t(5861),u=t(2982),a=t(885),i=t(7757),o=t.n(i),l=t(2791),c=t(3504),s=t(9085),v=t(3524),f=t(6414),d=t(7856),g=t(8156),p=t(2395),h=t(3625),k=t(4305),m=t(184),b={viewing:v.MX.QUEUE,sorting:v.kq.LATEST},w=function(){var e=(0,c.lr)(b),n=(0,a.Z)(e,2),t=n[0],i=n[1],w=(0,f.a)().user,Z=(0,d.u)().genresList,S=(0,l.useState)([]),_=(0,a.Z)(S,2),x=_[0],A=_[1],E=(0,l.useState)([]),j=(0,a.Z)(E,2),C=j[0],T=j[1],q=(0,l.useState)(!1),L=(0,a.Z)(q,2),y=L[0],M=L[1],R=(0,g.a)(t),D=(0,a.Z)(R,2),G=D[0],N=D[1],O=t.get("viewing"),P=t.get("sorting");(0,l.useEffect)((function(){i({viewing:O,sorting:P,filtering:G?"".concat(null===G||void 0===G?void 0:G.value,"-").concat(null===G||void 0===G?void 0:G.label):""})}),[G,i,P,O]);var U=(0,l.useCallback)((function(e){return P===v.kq.LATEST?(0,u.Z)(e).sort((function(e,n){return n["".concat(O,"DateAdded")]-e["".concat(O,"DateAdded")]})):P===v.kq.RATING?(0,u.Z)(e).sort((function(e,n){return n.vote_average-e.vote_average})):P===v.kq.YEAR?(0,u.Z)(e).sort((function(e,n){return n.release_date.localeCompare(e.release_date)})):void 0}),[P,O]),W=(0,l.useCallback)((function(e){return null!==G&&void 0!==G&&G.value?null!==G&&void 0!==G&&G.value?e.filter((function(e){return e.genres.includes(G.value)})):void 0:e}),[null===G||void 0===G?void 0:G.value]);(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(o().mark((function e(){var n,t,r,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!1),e.prev=1,e.next=4,(0,p.gp)(w);case 4:n=e.sent,t=Object.values(n.val()).filter((function(e){return!0===e[O]})),Y(t,Z),r=U(t),u=W(r),A(u),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),s.Am.info("You have no movies in ".concat(O)),A([]);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[W,G,Z,y,U,w,O]);var Y=function(e,n){var t=e.flatMap((function(e){return e.genres})).filter((function(e,n,t){return t.indexOf(e)===n})).map((function(e){return n.find((function(n){return n.id===e}))}));T(t)};return(0,m.jsx)(k.$0,{children:(0,m.jsxs)(k.W2,{children:[(0,m.jsx)(h._V,{sorting:P,viewing:O,setSearchParams:i,filterStatus:G,setFilterStatus:N,allGenres:C,libraryMovies:x}),0!==(null===x||void 0===x?void 0:x.length)&&(0,m.jsx)(h.eW,{movies:x,setRefreshPage:M})]})})};n.default=w}}]);
//# sourceMappingURL=library-page.99d60dd5.chunk.js.map