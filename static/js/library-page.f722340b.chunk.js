"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[913],{9839:function(e,t,n){n.r(t),n.d(t,{Library:function(){return Z}});var r=n(5861),u=n(2982),a=n(885),s=n(7757),i=n.n(s),o=n(2791),c=n(3504),l=n(9085),f=n(1238),v=n(4305),d=n(6414),p=n(2395),S=n(3524),k=n(7856),h=n(184),Z=function(){var e=(0,d.a)().user,t=(0,k.u)().genresList,n=(0,c.lr)(),s=(0,a.Z)(n,2)[1],Z=(0,o.useState)([]),m=(0,a.Z)(Z,2),w=m[0],_=m[1],b=(0,o.useState)([]),g=(0,a.Z)(b,2),x=g[0],A=g[1],E=(0,o.useState)(S.MX.QUEUE),j=(0,a.Z)(E,2),C=j[0],T=j[1],q=(0,o.useState)(S.kq.LATEST),L=(0,a.Z)(q,2),y=L[0],M=L[1],R=(0,o.useState)(""),D=(0,a.Z)(R,2),G=D[0],O=D[1],U=(0,o.useState)(!1),V=(0,a.Z)(U,2),W=V[0],Y=V[1],F=(0,o.useCallback)((function(e){return y===S.kq.LATEST?(0,u.Z)(e).sort((function(e,t){return t["".concat(C,"DateAdded")]-e["".concat(C,"DateAdded")]})):y===S.kq.RATING?(0,u.Z)(e).sort((function(e,t){return t.vote_average-e.vote_average})):y===S.kq.YEAR?(0,u.Z)(e).sort((function(e,t){return t.release_date.localeCompare(e.release_date)})):void 0}),[y,C]),I=(0,o.useCallback)((function(e){return null!==G&&void 0!==G&&G.value?null!==G&&void 0!==G&&G.value?e.filter((function(e){return e.genres.includes(G.value)})):void 0:e}),[null===G||void 0===G?void 0:G.value]);(0,o.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var r,u,a,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Y(!1),s({view:C}),n.prev=2,n.next=5,(0,p.gp)(e);case 5:r=n.sent,u=Object.values(r.val()).filter((function(e){return!0===e[C]})),N(u,t),a=F(u),o=I(a),_(o),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(2),l.Am.info("You have no movies in ".concat(C)),_([]);case 17:case"end":return n.stop()}}),n,null,[[2,13]])})));return function(){return n.apply(this,arguments)}}();n()}),[I,G,t,W,s,F,e,C]);var N=function(e,t){var n=e.flatMap((function(e){return e.genres})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return t.find((function(t){return t.id===e}))}));A(n)};return(0,h.jsx)(v.$0,{children:(0,h.jsxs)(v.W2,{children:[(0,h.jsx)(f._V,{sortStatus:y,setSortStatus:M,filterStatus:G,setFilterStatus:O,viewStatus:C,setViewStatus:T,allGenres:x,libraryMovies:w}),0!==(null===w||void 0===w?void 0:w.length)&&(0,h.jsx)(f.eW,{movies:w,setRefreshPage:Y})]})})};t.default=Z}}]);
//# sourceMappingURL=library-page.f722340b.chunk.js.map