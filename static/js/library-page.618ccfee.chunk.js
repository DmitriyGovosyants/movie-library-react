"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[913],{9839:function(e,t,n){n.r(t),n.d(t,{Library:function(){return w}});var r=n(5861),a=n(2982),u=n(885),i=n(7757),o=n.n(i),s=n(2791),c=n(3504),l=n(9085),f=n(2874),v=n(4305),d=n(6414),g=n(2395),p=n(3524),h=n(7856),k=n(184),m={viewing:p.MX.QUEUE,sorting:p.kq.LATEST},w=function(){var e=(0,d.a)().user,t=(0,h.u)().genresList,n=(0,s.useState)([]),i=(0,u.Z)(n,2),w=i[0],S=i[1],Z=(0,s.useState)([]),_=(0,u.Z)(Z,2),b=_[0],x=_[1],A=(0,s.useState)(""),E=(0,u.Z)(A,2),j=E[0],C=E[1],T=(0,s.useState)(!1),q=(0,u.Z)(T,2),L=q[0],y=q[1],M=(0,c.lr)(m),R=(0,u.Z)(M,2),D=R[0],G=R[1],O=D.get("viewing"),P=D.get("sorting"),U=(0,s.useCallback)((function(e){return P===p.kq.LATEST?(0,a.Z)(e).sort((function(e,t){return t["".concat(O,"DateAdded")]-e["".concat(O,"DateAdded")]})):P===p.kq.RATING?(0,a.Z)(e).sort((function(e,t){return t.vote_average-e.vote_average})):P===p.kq.YEAR?(0,a.Z)(e).sort((function(e,t){return t.release_date.localeCompare(e.release_date)})):void 0}),[P,O]),W=(0,s.useCallback)((function(e){return null!==j&&void 0!==j&&j.value?null!==j&&void 0!==j&&j.value?e.filter((function(e){return e.genres.includes(j.value)})):void 0:e}),[null===j||void 0===j?void 0:j.value]);(0,s.useEffect)((function(){var n=function(){var n=(0,r.Z)(o().mark((function n(){var r,a,u,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return y(!1),n.prev=1,n.next=4,(0,g.gp)(e);case 4:r=n.sent,a=Object.values(r.val()).filter((function(e){return!0===e[O]})),Y(a,t),u=U(a),i=W(u),S(i),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(1),l.Am.info("You have no movies in ".concat(O)),S([]);case 16:case"end":return n.stop()}}),n,null,[[1,12]])})));return function(){return n.apply(this,arguments)}}();n()}),[W,j,t,L,U,e,O]);var Y=function(e,t){var n=e.flatMap((function(e){return e.genres})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return t.find((function(t){return t.id===e}))}));x(n)};return(0,k.jsx)(v.$0,{children:(0,k.jsxs)(v.W2,{children:[(0,k.jsx)(f._V,{sorting:P,viewing:O,setSearchParams:G,filterStatus:j,setFilterStatus:C,allGenres:b,libraryMovies:w}),0!==(null===w||void 0===w?void 0:w.length)&&(0,k.jsx)(f.eW,{movies:w,setRefreshPage:y})]})})};t.default=w}}]);
//# sourceMappingURL=library-page.618ccfee.chunk.js.map