"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[913],{7577:function(e,n,t){t.r(n),t.d(n,{Library:function(){return j},default:function(){return m}});var r=t(2982),a=t(5861),u=t(885),o=t(7757),i=t.n(o),c=t(2791),s=t(3504),l=t(9085),v=t(1382),d=t(7132),f=t(2395),h="latest",p="rating",x="year",g=t(184),j=function(){var e=(0,c.useState)([]),n=(0,u.Z)(e,2),t=n[0],o=n[1],j=(0,c.useState)(h),m=(0,u.Z)(j,2),k=m[0],w=m[1],b=(0,c.useState)(""),y=(0,u.Z)(b,2),C=y[0],S=y[1],Z=(0,c.useState)([]),_=(0,u.Z)(Z,2),A=_[0],T=_[1],B=(0,d.a)().user,L=(0,s.lr)(),W=(0,u.Z)(L,2),z=W[0],D=W[1],E=function(){var e=(0,a.Z)(i().mark((function e(n,t,r){var a,u,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D({view:n}),e.prev=1,e.next=4,(0,f.gp)(B);case 4:a=e.sent,u=Object.values(a.val()).filter((function(e){return!0===e[n]})),c=M(t,u,n),R(c),r&&(s=O(c,r),o(s)),r||o(c),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),l.Am.info("You have no movies in ".concat(n)),o([]);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n,t,r){return e.apply(this,arguments)}}(),M=function(e,n,t){return e===h?(0,r.Z)(n).sort((function(e,n){return n["".concat(t,"DateAdded")]-e["".concat(t,"DateAdded")]})):e===p?(0,r.Z)(n).sort((function(e,n){return n.vote_average-e.vote_average})):e===x?(0,r.Z)(n).sort((function(e,n){return n.release_date.localeCompare(e.release_date)})):void 0},O=function(e,n){return e.filter((function(e){return e.genres.includes(n)}))},R=function(e){var n=e.flatMap((function(e){return e.genres.split(",")})).filter((function(e,n,t){return t.indexOf(e)===n}));T(n)},Y=function(e){var n=z.get("view"),t=e.target.value;E(n,t,C),w(t)};return console.log("STATUS: ",C),(0,g.jsx)(v.$0,{children:(0,g.jsxs)(v.W2,{children:[(0,g.jsxs)("label",{children:["LATEST",(0,g.jsx)("input",{type:"radio",checked:k===h,name:"sortBy",value:h,onChange:Y})]}),(0,g.jsxs)("label",{children:["RATING",(0,g.jsx)("input",{type:"radio",checked:k===p,name:"sortBy",value:p,onChange:Y})]}),(0,g.jsxs)("label",{children:["YEAR",(0,g.jsx)("input",{type:"radio",checked:k===x,name:"sortBy",value:x,onChange:Y})]}),(0,g.jsxs)("label",{children:["Choose genre",(0,g.jsxs)("select",{name:"genres",value:C,onChange:function(e){var n=z.get("view"),t=e.target.value;E(n,k,t),S(t)},children:[(0,g.jsx)("option",{value:""}),A.map((function(e){return(0,g.jsx)("option",{value:e,children:e},e)}))]})]}),(0,g.jsx)(v.zx,{onClick:function(){return E("queue",k,C)},children:"Queue"}),(0,g.jsx)(v.zx,{onClick:function(){return E("watched",k,C)},children:"Watched"}),z.get("view"),null===t||void 0===t?void 0:t.length,0!==(null===t||void 0===t?void 0:t.length)&&(0,g.jsx)(v.eW,{movies:t,fetchLibraryMovies:E,searchParams:z,sortStatus:k,filterStatus:C})]})})},m=j}}]);
//# sourceMappingURL=library-page.e6acbb12.chunk.js.map