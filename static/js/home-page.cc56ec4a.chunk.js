"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[223],{8156:function(e,t,r){r.d(t,{a:function(){return s}});var a=r(885),n=r(2791),s=function(e){var t=(0,n.useState)((function(){var t=e.get("filtering");if(!t)return null;var r=t.split("-");return{value:Number(r[0]),label:r[1]}})),r=(0,a.Z)(t,2);return[r[0],r[1]]}},7965:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var a=r(2982),n=r(5861),s=r(885),u=r(7757),c=r.n(u),l=r(2791),o=r(3504),i=r(9085),v=r(3524),p=function(){window.scrollTo({top:0,behavior:"instant"})},f=r(6414),g=r(2007),h=function(e){var t=(0,l.useRef)();return(0,l.useEffect)((function(){t.current=e}),[e]),t.current};h.propTypes={value:r.n(g)().string.isRequired};var d=r(8156),k=r(3243),m=r(8858),x=r(4305),b=r(184),Z={sorting:v.kq.TREND},w=function(){var e,t=(0,o.lr)(Z),r=(0,s.Z)(t,2),u=r[0],g=r[1],w=(0,l.useState)((function(){var e;return null!==(e=u.get("search"))&&void 0!==e?e:""})),S=(0,s.Z)(w,2),C=S[0],R=S[1],_=(0,l.useState)(Number(null!==(e=u.get("page"))&&void 0!==e?e:1)),q=(0,s.Z)(_,2),A=q[0],E=q[1],j=(0,d.a)(u),N=(0,s.Z)(j,2),T=N[0],P=N[1],y=(0,l.useState)([]),D=(0,s.Z)(y,2),H=D[0],W=D[1],G=(0,l.useState)(0),I=(0,s.Z)(G,2),$=I[0],F=I[1],L=(0,l.useState)(!1),O=(0,s.Z)(L,2),z=O[0],B=O[1],J=h(C),K=(0,f.a)().userLanguage,M=u.get("sorting"),Q=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t,r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),p(),e.prev=2,e.next=5,(0,k.Wu)(A,K.value);case 5:t=e.sent,r=t.data,n=r.results,s=r.total_pages,F(s),W((0,a.Z)(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),i.Am.error(e.t0.message);case 16:return e.prev=16,B(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))),[A,K.value]),U=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t,r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),p(),e.prev=2,e.next=5,(0,k.cH)(A,K.value);case 5:t=e.sent,r=t.data,n=r.results,s=r.total_pages,F(s),W((0,a.Z)(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),i.Am.error(e.t0.message);case 16:return e.prev=16,B(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))),[A,K.value]),V=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t,r,n,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),p(),M===v.kq.TREND&&(t="popularity.desc"),M===v.kq.RATING&&(t="vote_average.desc"),e.prev=4,e.next=7,(0,k.CO)(A,K.value,T.value,t);case 7:r=e.sent,n=r.data,s=n.results,u=n.total_pages,F(u),W((0,a.Z)(s)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),i.Am.error(e.t0.message);case 18:return e.prev=18,B(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,15,18,21]])}))),[null===T||void 0===T?void 0:T.value,A,M,null===K||void 0===K?void 0:K.value]),X=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C===J){e.next=4;break}return W([]),P(null),e.abrupt("return");case 4:t=function(){var e=(0,n.Z)(c().mark((function e(){var t,r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),p(),e.prev=2,e.next=5,(0,k.Pv)(A,C,K.value);case 5:t=e.sent,r=t.data,n=r.results,s=r.total_pages,F(s),W((0,a.Z)(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),i.Am.error(e.t0.message);case 16:return e.prev=16,B(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),t();case 6:case"end":return e.stop()}}),e)}))),[A,J,C,P,K.value]);return(0,l.useEffect)((function(){g({sorting:M,search:C,filtering:T?"".concat(null===T||void 0===T?void 0:T.value,"-").concat(null===T||void 0===T?void 0:T.label):"",page:A})}),[T,A,C,g,M]),(0,l.useEffect)((function(){M!==v.kq.TREND||T?M!==v.kq.RATING||T?M!==v.kq.SEARCH&&T?V():M!==v.kq.SEARCH||X():U():Q()}),[T,V,X,Q,U,M]),(0,b.jsx)(x.$0,{children:(0,b.jsxs)(x.W2,{children:[(0,b.jsx)(m.Sx,{page:A,totalPage:$,sorting:M,filterStatus:T,search:C,setSearchParams:g,setFilterStatus:P,setSearch:R,setPage:E}),z&&(0,b.jsx)(m.$j,{}),0!==H.length&&(0,b.jsx)(m.eW,{movies:H}),H.length>0&&(0,b.jsx)(m.tl,{page:A,totalPage:$,setPage:E})]})})}}}]);
//# sourceMappingURL=home-page.cc56ec4a.chunk.js.map