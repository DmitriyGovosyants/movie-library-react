"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[913],{9839:function(e,n,t){t.r(n),t.d(n,{Library:function(){return x}});var r=t(5861),a=t(2982),u=t(885),c=t(7757),o=t.n(c),i=t(2791),s=t(3504),l=t(9085),f=t(1382),v=t(7132),d=t(2395),h=t(3524),p=t(184),x=function(){var e=(0,i.useState)([]),n=(0,u.Z)(e,2),t=n[0],c=n[1],x=(0,i.useState)(h.n.LATEST),g=(0,u.Z)(x,2),A=g[0],j=g[1],k=(0,i.useState)(""),E=(0,u.Z)(k,2),T=E[0],m=E[1],C=(0,i.useState)(h.G.QUEUE),b=(0,u.Z)(C,2),S=b[0],Z=b[1],R=(0,i.useState)([]),w=(0,u.Z)(R,2),y=w[0],_=w[1],G=(0,i.useState)(!1),L=(0,u.Z)(G,2),Y=L[0],I=L[1],N=(0,v.a)().user,U=(0,s.lr)(),W=(0,u.Z)(U,2),B=W[0],D=W[1],Q=(0,i.useCallback)((function(e){return A===h.n.LATEST?(0,a.Z)(e).sort((function(e,n){return n["".concat(S,"DateAdded")]-e["".concat(S,"DateAdded")]})):A===h.n.RATING?(0,a.Z)(e).sort((function(e,n){return n.vote_average-e.vote_average})):A===h.n.YEAR?(0,a.Z)(e).sort((function(e,n){return n.release_date.localeCompare(e.release_date)})):void 0}),[A,S]),z=(0,i.useCallback)((function(e){return e.filter((function(e){return e.genres.includes(T)}))}),[T]);(0,i.useEffect)((function(){var e=function(){var e=(0,r.Z)(o().mark((function e(){var n,t,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!1),D({view:S}),e.prev=2,e.next=5,(0,d.gp)(N);case 5:n=e.sent,t=Object.values(n.val()).filter((function(e){return!0===e[S]})),r=Q(t),O(r),T&&(a=z(r),c(a)),T||c(r),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),l.Am.info("You have no movies in ".concat(S)),c([]);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[z,T,Y,D,Q,N,S]);var O=function(e){var n=e.flatMap((function(e){return e.genres.split(",")})).filter((function(e,n,t){return t.indexOf(e)===n}));_(n)};return(0,p.jsx)(f.$0,{children:(0,p.jsxs)(f.W2,{children:[(0,p.jsxs)("label",{children:["LATEST",(0,p.jsx)("input",{type:"radio",checked:A===h.n.LATEST,name:"sortBy",value:h.n.LATEST,onChange:function(e){return j(e.target.value)}})]}),(0,p.jsxs)("label",{children:["RATING",(0,p.jsx)("input",{type:"radio",checked:A===h.n.RATING,name:"sortBy",value:h.n.RATING,onChange:function(e){return j(e.target.value)}})]}),(0,p.jsxs)("label",{children:["YEAR",(0,p.jsx)("input",{type:"radio",checked:A===h.n.YEAR,name:"sortBy",value:h.n.YEAR,onChange:function(e){return j(e.target.value)}})]}),(0,p.jsxs)("label",{children:["Choose genre",(0,p.jsxs)("select",{name:"genres",value:T,onChange:function(e){return m(e.target.value)},children:[(0,p.jsx)("option",{value:""}),y.map((function(e){return(0,p.jsx)("option",{value:e,children:e},e)}))]})]}),(0,p.jsx)(f.zx,{onClick:function(){return Z(h.G.QUEUE)},children:"Queue"}),(0,p.jsx)(f.zx,{onClick:function(){return Z(h.G.WATCHED)},children:"Watched"}),B.get("view"),null===t||void 0===t?void 0:t.length,0!==(null===t||void 0===t?void 0:t.length)&&(0,p.jsx)(f.eW,{movies:t,setRefreshPage:I})]})})};n.default=x}}]);
//# sourceMappingURL=library-page.a79a94b7.chunk.js.map