"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[223],{7965:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var a=r(2982),n=r(5861),s=r(885),u=r(7757),c=r.n(u),l=r(2791),o=r(3243),i=function(){window.scrollTo({top:0,behavior:"instant"})},v=r(2874),p=r(4305),f=r(6414),g=r(3524),h=r(9085),k=r(3504),d=r(184),x={sorting:g.kq.TREND},m=function(){var e,t=(0,k.lr)(x),r=(0,s.Z)(t,2),u=r[0],m=r[1],w=(0,l.useState)((function(){var e;return null!==(e=u.get("search"))&&void 0!==e?e:""})),Z=(0,s.Z)(w,2),b=Z[0],S=Z[1],C=(0,l.useState)(Number(null!==(e=u.get("page"))&&void 0!==e?e:1)),_=(0,s.Z)(C,2),A=_[0],E=_[1],R=(0,l.useState)(null),j=(0,s.Z)(R,2),q=j[0],N=j[1],P=(0,l.useState)([]),T=(0,s.Z)(P,2),D=T[0],H=T[1],W=(0,l.useState)(0),y=(0,s.Z)(W,2),G=y[0],I=y[1],$=(0,l.useState)(!1),F=(0,s.Z)($,2),L=F[0],O=F[1],z=function(e){var t=(0,l.useRef)();return(0,l.useEffect)((function(){t.current=e}),[e]),t.current}(b),B=(0,f.a)().userLanguage,J=u.get("sorting");console.log(A),(0,l.useEffect)((function(){m({sorting:J,search:b,page:A})}),[q,A,b,m,J]);var K=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t,r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),i(),e.prev=2,e.next=5,(0,o.Wu)(A,B.value);case 5:t=e.sent,r=t.data,n=r.results,s=r.total_pages,I(s),H((0,a.Z)(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),h.Am.error(e.t0.message);case 16:return e.prev=16,O(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))),[A,B.value]),M=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t,r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),i(),e.prev=2,e.next=5,(0,o.cH)(A,B.value);case 5:t=e.sent,r=t.data,n=r.results,s=r.total_pages,I(s),H((0,a.Z)(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),h.Am.error(e.t0.message);case 16:return e.prev=16,O(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))),[A,B.value]),Q=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t,r,n,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),i(),J===g.kq.TREND&&(t="popularity.desc"),J===g.kq.RATING&&(t="vote_average.desc"),e.prev=4,e.next=7,(0,o.CO)(A,B.value,q.value,t);case 7:r=e.sent,n=r.data,s=n.results,u=n.total_pages,I(u),H((0,a.Z)(s)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),h.Am.error(e.t0.message);case 18:return e.prev=18,O(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,15,18,21]])}))),[null===q||void 0===q?void 0:q.value,A,J,null===B||void 0===B?void 0:B.value]),U=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b===z){e.next=4;break}return H([]),N(null),e.abrupt("return");case 4:t=function(){var e=(0,n.Z)(c().mark((function e(){var t,r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),i(),e.prev=2,e.next=5,(0,o.Pv)(A,b,B.value);case 5:t=e.sent,r=t.data,n=r.results,s=r.total_pages,I(s),H((0,a.Z)(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),h.Am.error(e.t0.message);case 16:return e.prev=16,O(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),t();case 6:case"end":return e.stop()}}),e)}))),[A,z,b,B.value]);return(0,l.useEffect)((function(){J!==g.kq.TREND||q?J!==g.kq.RATING||q?J!==g.kq.SEARCH&&q?Q():J!==g.kq.SEARCH||U():M():K()}),[q,Q,U,K,M,J]),(0,d.jsx)(p.$0,{children:(0,d.jsxs)(p.W2,{children:[(0,d.jsx)(v.Sx,{sorting:J,setSearchParams:m,filterStatus:q,setFilterStatus:N,search:b,setSearch:S,setPage:E,page:A,totalPage:G}),L&&(0,d.jsx)(v.$j,{}),0!==D.length&&(0,d.jsx)(v.eW,{movies:D}),D.length>0&&(0,d.jsx)(v.tl,{setPage:E,page:A,totalPage:G})]})})}}}]);
//# sourceMappingURL=home-page.6c265c92.chunk.js.map