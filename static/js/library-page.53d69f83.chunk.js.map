{"version":3,"file":"static/js/library-page.53d69f83.chunk.js","mappings":"4SAQaA,EAAU,WACrB,OAA4CC,EAAAA,EAAAA,UAAS,IAArD,eAAOC,EAAP,KAAuBC,EAAvB,KACA,GAA0CF,EAAAA,EAAAA,UAAS,IAAnD,eAAOG,EAAP,KAAsBC,EAAtB,KACQC,GAASC,EAAAA,EAAAA,KAATD,KACR,GAAwCE,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAqBC,EAArB,KAEMC,EAAkB,mCAAG,WAAMC,GAAN,qGAEAC,EAAAA,EAAAA,KAAIC,EAAAA,EAAAA,KAAMC,EAAAA,EAAAA,IAAIC,EAAAA,IAAL,wBAAoBV,QAApB,IAAoBA,OAApB,EAAoBA,EAAMW,IAA1B,aAFT,OAEjBC,EAFiB,OAGjBC,EAAYC,OAAOC,OAAOH,EAASI,OACnCpB,EAAiBiB,EACpBI,QAAO,SAAAC,GAAK,OAAsB,IAAlBA,EAAMZ,MACtBa,MAAK,SAACC,EAAGC,GAAJ,OAAUA,EAAE,GAAD,OAAIf,EAAJ,cAAyBc,EAAE,GAAD,OAAId,EAAJ,iBAE7CT,EAAkBD,GAClBG,EAAiBO,GATM,kDAWvBgB,EAAAA,GAAAA,KAAA,gCAAoChB,IAXb,0DAAH,sDAexB,OACE,SAAC,KAAD,WACE,UAAC,KAAD,YACE,SAAC,KAAD,CACEiB,QAAS,WACPlB,EAAmB,SACnBD,EAAgB,CAAEoB,KAAM,WAH5B,oBAQA,SAAC,KAAD,CACED,QAAS,WACPlB,EAAmB,WACnBD,EAAgB,CAAEoB,KAAM,aAH5B,qBAQC1B,EAC2B,KAAb,OAAdF,QAAc,IAAdA,OAAA,EAAAA,EAAgB6B,UACf,SAAC,KAAD,CACEC,OAAQ9B,EACRS,mBAAoBA,EACpBF,aAAcA,UAQ1B","sources":["pages/Library.jsx"],"sourcesContent":["import { db } from 'services/firebase/frebaseConfig';\nimport { child, get, ref } from 'firebase/database';\nimport { useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { Section, Container, Button, MovieList } from 'components';\nimport { useUser } from 'context/userContext';\n\nexport const Library = () => {\n  const [moviesByStatus, setMoviesByStatus] = useState([]);\n  const [currentStatus, setCurrentStatus] = useState('');\n  const { user } = useUser();\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const fetchLibraryMovies = async status => {\n    try {\n      const snapshot = await get(child(ref(db), `/users/${user?.uid}/movies`));\n      const allMovies = Object.values(snapshot.val());\n      const moviesByStatus = allMovies\n        .filter(movie => movie[status] === true)\n        .sort((a, b) => b[`${status}DateAdded`] - a[`${status}DateAdded`]);\n\n      setMoviesByStatus(moviesByStatus);\n      setCurrentStatus(status);\n    } catch (error) {\n      toast.info(`You have no movies in ${status}`);\n    }\n  };\n\n  return (\n    <Section>\n      <Container>\n        <Button\n          onClick={() => {\n            fetchLibraryMovies('queue');\n            setSearchParams({ view: 'queue' });\n          }}\n        >\n          Queue\n        </Button>\n        <Button\n          onClick={() => {\n            fetchLibraryMovies('watched');\n            setSearchParams({ view: 'watched' });\n          }}\n        >\n          Watched\n        </Button>\n        {currentStatus}\n        {moviesByStatus?.length !== 0 && (\n          <MovieList\n            movies={moviesByStatus}\n            fetchLibraryMovies={fetchLibraryMovies}\n            searchParams={searchParams}\n          />\n        )}\n      </Container>\n    </Section>\n  );\n};\n\nexport default Library;\n"],"names":["Library","useState","moviesByStatus","setMoviesByStatus","currentStatus","setCurrentStatus","user","useUser","useSearchParams","searchParams","setSearchParams","fetchLibraryMovies","status","get","child","ref","db","uid","snapshot","allMovies","Object","values","val","filter","movie","sort","a","b","toast","onClick","view","length","movies"],"sourceRoot":""}