"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[223],{8156:function(e,t,r){r.d(t,{a:function(){return s}});var a=r(885),n=r(2791),s=function(e){var t=(0,n.useState)((function(){var t=e.get("filtering");if(!t)return null;var r=t.split("-");return{value:Number(r[0]),label:r[1]}})),r=(0,a.Z)(t,2);return[r[0],r[1]]}},7965:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var a=r(2982),n=r(5861),s=r(885),u=r(7757),c=r.n(u),l=r(2791),o=r(3504),i=r(9085),v=r(3524),f=function(){window.scrollTo({top:0,behavior:"instant"})},p=r(6414),g=r(2007),h=function(e){var t=(0,l.useRef)();return(0,l.useEffect)((function(){t.current=e}),[e]),t.current};h.propTypes={value:r.n(g)().string.isRequired};var d=r(8156),k=r(3243),m=r(8858),x=r(4305),b=r(184),Z={sorting:v.kq.TREND},w=function(){var e=(0,o.lr)(Z),t=(0,s.Z)(e,2),r=t[0],u=t[1],g=(0,l.useState)((function(){var e;return null!==(e=r.get("search"))&&void 0!==e?e:""})),w=(0,s.Z)(g,2),S=w[0],C=w[1],R=(0,l.useState)((function(){var e;return Number(null!==(e=r.get("page"))&&void 0!==e?e:1)})),_=(0,s.Z)(R,2),q=_[0],A=_[1],E=(0,d.a)(r),j=(0,s.Z)(E,2),N=j[0],T=j[1],P=(0,l.useState)([]),y=(0,s.Z)(P,2),D=y[0],H=y[1],W=(0,l.useState)(0),G=(0,s.Z)(W,2),I=G[0],$=G[1],F=(0,l.useState)(!1),L=(0,s.Z)(F,2),O=L[0],z=L[1],B=h(S),J=(0,p.a)().userLanguage,K=r.get("sorting"),M=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t,r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),f(),e.prev=2,e.next=5,(0,k.Wu)(q,J.value);case 5:t=e.sent,r=t.data,n=r.results,s=r.total_pages,$(s),H((0,a.Z)(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),i.Am.error(e.t0.message);case 16:return e.prev=16,z(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))),[q,J.value]),Q=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t,r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),f(),e.prev=2,e.next=5,(0,k.cH)(q,J.value);case 5:t=e.sent,r=t.data,n=r.results,s=r.total_pages,$(s),H((0,a.Z)(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),i.Am.error(e.t0.message);case 16:return e.prev=16,z(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))),[q,J.value]),U=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t,r,n,s,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),f(),K===v.kq.TREND&&(t="popularity.desc"),K===v.kq.RATING&&(t="vote_average.desc"),e.prev=4,e.next=7,(0,k.CO)(q,J.value,N.value,t);case 7:r=e.sent,n=r.data,s=n.results,u=n.total_pages,$(u),H((0,a.Z)(s)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),i.Am.error(e.t0.message);case 18:return e.prev=18,z(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[4,15,18,21]])}))),[null===N||void 0===N?void 0:N.value,q,K,null===J||void 0===J?void 0:J.value]),V=(0,l.useCallback)((0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S===B){e.next=4;break}return H([]),T(null),e.abrupt("return");case 4:t=function(){var e=(0,n.Z)(c().mark((function e(){var t,r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),f(),e.prev=2,e.next=5,(0,k.Pv)(q,S,J.value);case 5:t=e.sent,r=t.data,n=r.results,s=r.total_pages,$(s),H((0,a.Z)(n)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),i.Am.error(e.t0.message);case 16:return e.prev=16,z(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),t();case 6:case"end":return e.stop()}}),e)}))),[q,B,S,T,J.value]);return(0,l.useEffect)((function(){u({sorting:K,search:S,filtering:N?"".concat(null===N||void 0===N?void 0:N.value,"-").concat(null===N||void 0===N?void 0:N.label):"",page:q})}),[N,q,S,u,K]),(0,l.useEffect)((function(){K!==v.kq.TREND||N?K!==v.kq.RATING||N?K!==v.kq.SEARCH&&N?U():K!==v.kq.SEARCH||V():Q():M()}),[N,U,V,M,Q,K]),(0,b.jsx)(x.$0,{children:(0,b.jsxs)(x.W2,{children:[(0,b.jsx)(m.Sx,{page:q,totalPage:I>500?500:I,sorting:K,filterStatus:N,search:S,setSearchParams:u,setFilterStatus:T,setSearch:C,setPage:A}),O&&(0,b.jsx)(m.$j,{}),0!==D.length&&(0,b.jsx)(m.eW,{movies:D}),D.length>0&&(0,b.jsx)(m.tl,{page:q,totalPage:I>500?500:I,setPage:A})]})})}}}]);
//# sourceMappingURL=home-page.1d0b7ae2.chunk.js.map