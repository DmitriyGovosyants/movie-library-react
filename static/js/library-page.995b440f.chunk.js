"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[913],{9839:function(e,t,n){n.r(t),n.d(t,{Library:function(){return k}});var r=n(5861),u=n(2982),a=n(885),s=n(7757),i=n.n(s),o=n(2791),c=n(3504),l=n(9085),f=n(1238),v=n(4305),d=n(6414),p=n(2395),S=n(3524),h=n(7856),Z=n(184),k=function(){var e=(0,d.a)().user,t=(0,h.u)().genresList,n=(0,c.lr)(),s=(0,a.Z)(n,2)[1],k=(0,o.useState)([]),m=(0,a.Z)(k,2),g=m[0],w=m[1],_=(0,o.useState)([]),b=(0,a.Z)(_,2),x=b[0],A=b[1],E=(0,o.useState)(S.Gg.QUEUE),j=(0,a.Z)(E,2),C=j[0],T=j[1],L=(0,o.useState)(S.n7.LATEST),y=(0,a.Z)(L,2),G=y[0],R=y[1],D=(0,o.useState)(""),M=(0,a.Z)(D,2),O=M[0],U=M[1],V=(0,o.useState)(!1),W=(0,a.Z)(V,2),Y=W[0],F=W[1],I=(0,o.useCallback)((function(e){return G===S.n7.LATEST?(0,u.Z)(e).sort((function(e,t){return t["".concat(C,"DateAdded")]-e["".concat(C,"DateAdded")]})):G===S.n7.RATING?(0,u.Z)(e).sort((function(e,t){return t.vote_average-e.vote_average})):G===S.n7.YEAR?(0,u.Z)(e).sort((function(e,t){return t.release_date.localeCompare(e.release_date)})):void 0}),[G,C]),N=(0,o.useCallback)((function(e){return null!==O&&void 0!==O&&O.value?null!==O&&void 0!==O&&O.value?e.filter((function(e){return e.genres.includes(O.value)})):void 0:e}),[null===O||void 0===O?void 0:O.value]);(0,o.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var r,u,a,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return F(!1),s({view:C}),n.prev=2,n.next=5,(0,p.gp)(e);case 5:r=n.sent,u=Object.values(r.val()).filter((function(e){return!0===e[C]})),P(u,t),a=I(u),o=N(a),w(o),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(2),l.Am.info("You have no movies in ".concat(C)),w([]);case 17:case"end":return n.stop()}}),n,null,[[2,13]])})));return function(){return n.apply(this,arguments)}}();n()}),[N,O,t,Y,s,I,e,C]);var P=function(e,t){var n=e.flatMap((function(e){return e.genres})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return t.find((function(t){return t.id===e}))}));A(n)};return(0,Z.jsx)(v.$0,{children:(0,Z.jsxs)(v.W2,{children:[(0,Z.jsx)(f._V,{sortStatus:G,setSortStatus:R,filterStatus:O,setFilterStatus:U,viewStatus:C,setViewStatus:T,allGenres:x,libraryMovies:g}),0!==(null===g||void 0===g?void 0:g.length)&&(0,Z.jsx)(f.eW,{movies:g,setRefreshPage:F})]})})};t.default=k}}]);
//# sourceMappingURL=library-page.995b440f.chunk.js.map