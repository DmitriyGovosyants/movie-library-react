"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[913],{9839:function(e,t,n){n.r(t),n.d(t,{Library:function(){return Z}});var r=n(5861),u=n(2982),a=n(885),s=n(7757),i=n.n(s),o=n(2791),c=n(3504),l=n(9085),f=n(9282),v=n(7262),d=n(2395),p=n(3524),S=n(7351),h=n(184),Z=function(){var e=(0,v.a)().user,t=(0,S.c)().genresList,n=(0,c.lr)(),s=(0,a.Z)(n,2)[1],Z=(0,o.useState)([]),k=(0,a.Z)(Z,2),m=k[0],g=k[1],w=(0,o.useState)([]),_=(0,a.Z)(w,2),b=_[0],x=_[1],A=(0,o.useState)(p.Gg.QUEUE),E=(0,a.Z)(A,2),j=E[0],C=E[1],T=(0,o.useState)(p.n7.LATEST),L=(0,a.Z)(T,2),y=L[0],G=L[1],R=(0,o.useState)(""),D=(0,a.Z)(R,2),M=D[0],O=D[1],U=(0,o.useState)(!1),V=(0,a.Z)(U,2),W=V[0],Y=V[1],F=(0,o.useCallback)((function(e){return y===p.n7.LATEST?(0,u.Z)(e).sort((function(e,t){return t["".concat(j,"DateAdded")]-e["".concat(j,"DateAdded")]})):y===p.n7.RATING?(0,u.Z)(e).sort((function(e,t){return t.vote_average-e.vote_average})):y===p.n7.YEAR?(0,u.Z)(e).sort((function(e,t){return t.release_date.localeCompare(e.release_date)})):void 0}),[y,j]),I=(0,o.useCallback)((function(e){return null!==M&&void 0!==M&&M.value?null!==M&&void 0!==M&&M.value?e.filter((function(e){return e.genres.includes(M.value)})):void 0:e}),[null===M||void 0===M?void 0:M.value]);(0,o.useEffect)((function(){var n=function(){var n=(0,r.Z)(i().mark((function n(){var r,u,a,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Y(!1),s({view:j}),n.prev=2,n.next=5,(0,d.gp)(e);case 5:r=n.sent,u=Object.values(r.val()).filter((function(e){return!0===e[j]})),N(u,t),a=F(u),o=I(a),g(o),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(2),l.Am.info("You have no movies in ".concat(j)),g([]);case 17:case"end":return n.stop()}}),n,null,[[2,13]])})));return function(){return n.apply(this,arguments)}}();n()}),[I,M,t,W,s,F,e,j]);var N=function(e,t){var n=e.flatMap((function(e){return e.genres})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return t.find((function(t){return t.id===e}))}));x(n)};return(0,h.jsx)(f.$0,{children:(0,h.jsxs)(f.W2,{children:[(0,h.jsx)(f._V,{sortStatus:y,setSortStatus:G,filterStatus:M,setFilterStatus:O,viewStatus:j,setViewStatus:C,allGenres:b,libraryMovies:m}),0!==(null===m||void 0===m?void 0:m.length)&&(0,h.jsx)(f.eW,{movies:m,setRefreshPage:Y})]})})};t.default=Z}}]);
//# sourceMappingURL=library-page.fd07e221.chunk.js.map