"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[913],{9839:function(e,n,t){t.r(n),t.d(n,{Library:function(){return x}});var r=t(5861),a=t(2982),u=t(885),o=t(7757),c=t.n(o),i=t(2791),s=t(3504),l=t(9085),f=t(1382),v=t(7132),d=t(2395),h=t(3524),p=t(184),x=function(){var e=(0,v.a)().user,n=(0,s.lr)(),t=(0,u.Z)(n,2),o=t[0],x=t[1],g=(0,i.useState)([]),A=(0,u.Z)(g,2),j=A[0],k=A[1],E=(0,i.useState)([]),T=(0,u.Z)(E,2),m=T[0],C=T[1],b=(0,i.useState)(h.G.QUEUE),S=(0,u.Z)(b,2),Z=S[0],R=S[1],w=(0,i.useState)(h.n.LATEST),y=(0,u.Z)(w,2),L=y[0],_=y[1],G=(0,i.useState)(""),Y=(0,u.Z)(G,2),I=Y[0],N=Y[1],U=(0,i.useState)(!1),W=(0,u.Z)(U,2),B=W[0],D=W[1],Q=(0,i.useCallback)((function(e){return L===h.n.LATEST?(0,a.Z)(e).sort((function(e,n){return n["".concat(Z,"DateAdded")]-e["".concat(Z,"DateAdded")]})):L===h.n.RATING?(0,a.Z)(e).sort((function(e,n){return n.vote_average-e.vote_average})):L===h.n.YEAR?(0,a.Z)(e).sort((function(e,n){return n.release_date.localeCompare(e.release_date)})):void 0}),[L,Z]),z=(0,i.useCallback)((function(e){return I?I?e.filter((function(e){return e.genres.includes(I)})):void 0:e}),[I]);(0,i.useEffect)((function(){var n=function(){var n=(0,r.Z)(c().mark((function n(){var t,r,a,u;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return D(!1),x({view:Z}),n.prev=2,n.next=5,(0,d.gp)(e);case 5:t=n.sent,r=Object.values(t.val()).filter((function(e){return!0===e[Z]})),O(r),a=Q(r),u=z(a),k(u),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(2),l.Am.info("You have no movies in ".concat(Z)),k([]);case 17:case"end":return n.stop()}}),n,null,[[2,13]])})));return function(){return n.apply(this,arguments)}}();n()}),[z,I,B,x,Q,e,Z]);var O=function(e){var n=e.flatMap((function(e){return e.genres.split(",")})).filter((function(e,n,t){return t.indexOf(e)===n}));C(n)};return(0,p.jsx)(f.$0,{children:(0,p.jsxs)(f.W2,{children:[(0,p.jsxs)("label",{children:["LATEST",(0,p.jsx)("input",{type:"radio",checked:L===h.n.LATEST,name:"sortBy",value:h.n.LATEST,onChange:function(e){return _(e.target.value)}})]}),(0,p.jsxs)("label",{children:["RATING",(0,p.jsx)("input",{type:"radio",checked:L===h.n.RATING,name:"sortBy",value:h.n.RATING,onChange:function(e){return _(e.target.value)}})]}),(0,p.jsxs)("label",{children:["YEAR",(0,p.jsx)("input",{type:"radio",checked:L===h.n.YEAR,name:"sortBy",value:h.n.YEAR,onChange:function(e){return _(e.target.value)}})]}),(0,p.jsxs)("label",{children:["Choose genre",(0,p.jsxs)("select",{name:"genres",value:I,onChange:function(e){return N(e.target.value)},children:[(0,p.jsx)("option",{value:""}),m.map((function(e){return(0,p.jsx)("option",{value:e,children:e},e)})),(0,p.jsx)("option",{value:"",children:" - ALL - "})]})]}),(0,p.jsx)(f.zx,{onClick:function(){return R(h.G.QUEUE)},children:"Queue"}),(0,p.jsx)(f.zx,{onClick:function(){return R(h.G.WATCHED)},children:"Watched"}),o.get("view"),null===j||void 0===j?void 0:j.length,0!==(null===j||void 0===j?void 0:j.length)&&(0,p.jsx)(f.eW,{movies:j,setRefreshPage:D})]})})};n.default=x}}]);
//# sourceMappingURL=library-page.55485fe7.chunk.js.map